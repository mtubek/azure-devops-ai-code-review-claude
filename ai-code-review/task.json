{
    "$schema": "https://raw.githubusercontent.com/Microsoft/azure-pipelines-task-lib/master/tasks.schema.json",
    "id": "89886492-9f75-4549-bed4-68d2ed08f649",
    "name": "AICodeReview",
    "friendlyName": "AI Code Review",
    "description": "Complete a Code Review using Claude",
    "category": "Utility",
    "author": "Maciej Tubek",
    "version": {
        "Major": 1,
        "Minor": 3,
        "Patch": 0
    },
    "instanceNameFormat": "AI Code Review $(message)",
    "inputs": [
        {
            "name": "claudeApiKey",
            "type": "string",
            "label": "Claude API Key (Optional)",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "Your Anthropic Claude API key. Get one at https://console.anthropic.com/. Leave empty to skip Claude."
        },
        {
            "name": "claudeModel",
            "type": "string",
            "label": "Claude Model (Optional)",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "Claude model to use (e.g., claude-3-5-sonnet-20241022, claude-3-opus-20240229). Leave empty to skip Claude."
        },
        {
            "name": "openAiApiKey",
            "type": "string",
            "label": "OpenAI API Key (Optional)",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "Your OpenAI API key from platform.openai.com. Leave empty to skip OpenAI."
        },
        {
            "name": "openAiModel",
            "type": "string",
            "label": "OpenAI Model (Optional)",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "OpenAI model to use:\n- Chat models: gpt-5, gpt-5-mini, gpt-4o, gpt-4o-mini\n- Codex models: gpt-5-codex, gpt-5.1-codex, gpt-5.1-codex-max\n\nLeave empty to skip OpenAI."
        },
        {
            "name": "responseLanguage",
            "type": "pickList",
            "label": "Response Language",
            "defaultValue": "Polish",
            "required": true,
            "helpMarkDown": "Language for Claude's code review responses",
            "options": {
                "Polish": "Polish (Polski)",
                "English": "English",
                "German": "German (Deutsch)",
                "French": "French (Français)",
                "Spanish": "Spanish (Español)"
            }
        },
        {
            "name": "reviewBugs",
            "type": "boolean",
            "label": "Check for bugs",
            "defaultValue": true,
            "helpMarkDown": "Specify whether to enable bug checking during the code review process.\n\n- Set to `true` to perform bug checks.\n- Set to `false` to skip bug checks.\n\nBug checking helps identify and address potential issues in the code. Default value is `true`."
        },
        {
            "name": "reviewPerformance",
            "type": "boolean",
            "label": "Check for performance problems",
            "defaultValue": true,
            "helpMarkDown": "Specify whether to include performance checks during the code review process.\n\n- Set to `true` to perform performance checks.\n- Set to `false` to skip performance checks.\n\nEnabling performance checks helps identify and address potential performance-related issues in the code. Default value is `true`."
        },
        {
            "name": "reviewBestPractices",
            "type": "boolean",
            "label": "Check for missed best practices",
            "defaultValue": true,
            "helpMarkDown": "Specify whether to include checks for missed best practices during the code review process.\n\n- Set to `true` to perform best practices checks.\n- Set to `false` to skip best practices checks.\n\nEnabling best practices checks helps ensure adherence to coding standards and identifies areas for improvement. Default value is `true`."
        },
        {
            "name": "fileExtensions",
            "type": "string",
            "label": "File Extensions",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "Specify a comma-separated list of file extensions for which you want to perform a code review. This input helps narrow down the scope of the code review to specific file types.\n\n**Example:**\n```plaintext\n\".js,.ts,.css,.html\"\n```\n\nMake sure to provide the file extensions without spaces after the commas."
        },
        {
            "name": "fileExcludes",
            "type": "string",
            "label": "Files to exclude",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "## Files to Exclude Configuration\n\n### Description\nSpecify a comma-separated list of file names that should be excluded from code reviews. This is useful for excluding sensitive files or preventing certain files from being reviewed.\n\n### Format\nProvide a list of file names separated by commas. For example: `file1.js, file2.py, secret.txt`\n\n### Default Value\nIf no files are specified, all files will be considered for code review by default."
        },
        {
            "name": "additionalPrompts",
            "type": "multiLine",
            "label": "Additional Prompts",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "Specify additional prompts to enhance the code review process.\n\n- This prompt will be used in conjunction with the main code review prompts.\n\n**Example:**\n```plaintext\nFix variable naming, Ensure consistent indentation, Review error handling approach\n```"
        },
        {
            "name": "claudePromptTokensPrice",
            "type": "string",
            "label": "Claude: Input tokens price per million",
            "defaultValue": "3.00",
            "required": false,
            "helpMarkDown": "Claude input token price per million. Default for Claude 3.5 Sonnet: $3.00"
        },
        {
            "name": "claudeCompletionTokensPrice",
            "type": "string",
            "label": "Claude: Output tokens price per million",
            "defaultValue": "15.00",
            "required": false,
            "helpMarkDown": "Claude output token price per million. Default for Claude 3.5 Sonnet: $15.00"
        },
        {
            "name": "openAiPromptTokensPrice",
            "type": "string",
            "label": "OpenAI: Input tokens price per million",
            "defaultValue": "1.25",
            "required": false,
            "helpMarkDown": "OpenAI input token price per million. Check https://platform.openai.com/docs/pricing for your model"
        },
        {
            "name": "openAiCompletionTokensPrice",
            "type": "string",
            "label": "OpenAI: Output tokens price per million",
            "defaultValue": "10.00",
            "required": false,
            "helpMarkDown": "OpenAI output token price per million. Check https://platform.openai.com/docs/pricing for your model"
        },
        {
            "name": "reviewWholeDiffAtOnce",
            "type": "boolean",
            "label": "Review whole diff at once",
            "defaultValue": false,
            "helpMarkDown": "Specify whether to review the whole diff at once or review each file separately.\n\n- Set to `true` to review the whole diff at once.\n- Set to `false` to review each file separately.\n\nDefault value is `false`."
        },
        {
            "name": "maxTokens",
            "type": "string",
            "label": "Max tokens",
            "defaultValue": "16384",
            "required": false,
            "helpMarkDown": "Maximum number of tokens to use for each code review request. The default value is 16384 tokens."
        },
        {
            "name": "addCostToComments",
            "type": "boolean",
            "label": "Add cost to comment",
            "defaultValue": false,
            "helpMarkDown": "Specify whether to add the cost of the code review to the comment.\n\n- Set to `true` to add the cost of the code review to the comment.\n- Set to `false` to skip adding the cost of the code review to the comment.\n\nDefault value is `false`."
        }
    ],
    "execution": {
        "Node10": {
            "target": "dist/main.js"
        },
        "Node16": {
            "target": "dist/main.js"
        }
    }
}
